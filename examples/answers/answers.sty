\RequirePackage { longtable }
\dim_const:Nn
  \c_explanation_width_dim
  { 11.15cm }
\markdownSetupSnippet
  { answers }
  {
    snippet = istqb / sample-exam
      / questions,
    renderers = {
      jekyllDataEnd = {
        \group_begin:
        \tl_set:Nn
          \l_istqb_answers_table_tl
          { \begin
              { longtable }
              { | C { 1.9cm } | C { 1.5cm }
                | p
                { \c_explanation_width_dim }
                | C { 2.4cm } | C { 1.4cm }
                | C { 1.9cm } | }
            \hline
            \textbf
              { Question~Number~(\#) } &
            \textbf { Correct~Answer } &
            \multicolumn
              { 1 }
              { C
                { \c_explanation_width_dim }
                | }
              { \textbf
                  { Explanation~/~Rationale }
              } &
            \textbf
              { Learning~Objective~(LO) } &
            \textbf { K-Level } &
            \textbf { Number~of~Points } \\
            \hline
            \endhead }
        \seq_map_inline:Nn
          \g_istqb_questions_seq
          {
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { \textbf
                  { ##1 }
                \addcontentsline
                  { toc }
                  { subsection }
                  { Question~\# ##1 } & }
            \prop_get:cnN
              { g_istqb_answer_correct
                _keys_prop }
              { ##1 }
              \l_tmpa_clist
            \tl_put_right:Ne
              \l_istqb_answers_table_tl
              { \clist_use:Nn
                  \l_tmpa_clist
                  { ,~ } &
              }
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              {
                \begin
                  { minipage }
                  [ t ]
                  \c_explanation_width_dim
              }
            \prop_get:cnN
              { g_istqb_question_explanation
                _prop }
              { ##1 }
              \l_tmpa_tl
            \tl_put_right:NV
              \l_istqb_answers_table_tl
              \l_tmpa_tl
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { \end { minipage }
                \medskip }
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { & }
            \tl_put_right:NV
              \l_istqb_answers_table_tl
              \g_istqb_prefix_tl
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { - }
            \prop_get:cnN
              { g_istqb_question_learning
                _objective_prop }
              { ##1 }
              \l_tmpa_tl
            \tl_put_right:NV
              \l_istqb_answers_table_tl
              \l_tmpa_tl
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { & }
            \prop_get:NnN
              \g_istqb_question_k_level_prop
              { ##1 }
              \l_tmpa_tl
            \tl_put_right:NV
              \l_istqb_answers_table_tl
              \l_tmpa_tl
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { & }
            \prop_get:cnN
              { g_istqb_question_number_of
                _points_prop }
              { ##1 }
              \l_tmpa_tl
            \tl_put_right:NV
              \l_istqb_answers_table_tl
              \l_tmpa_tl
            \tl_put_right:Nn
              \l_istqb_answers_table_tl
              { \\ \hline }
          }
        \tl_put_right:Nn
          \l_istqb_answers_table_tl
          { \end { longtable } }
        \tl_use:N
          \l_istqb_answers_table_tl
        \group_end:
      },
    },
  }
