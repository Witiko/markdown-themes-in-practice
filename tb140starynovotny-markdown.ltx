\documentclass[final]{ltugboat}
\usepackage[T1]{fontenc} % tt \_
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{graphicx}
\usepackage[hidelinks,pdfa]{hyperref}
\usepackage{hologo}
\usepackage{minted}
\setminted{breaklines}
\usemintedstyle{bw}
\newmintedfile[showimplementation]{tex}{
  fontsize=\small,
  linenos,
  xleftmargin=0.5\parindent,
  escapeinside=\%\%,
}
\let\oldshowimplementation\showimplementation
\def\showimplementation#1{%
  \begingroup
  \def\linelabel##1{%
    \phantomsection
    \label{\detokenize{line:##1}}%
  }%
  \let\textit\textsl
  \let\bfseries\relax
  \oldshowimplementation{#1}%
  \endgroup
}
\def\slash{\discretionary{/}{/}{/}}
\def\lineref#1{\ref{line:#1}}
\def\linesref#1{\lineref{#1:begin}--\lineref{#1:end}}
\def\verb{\mintinline{text}}
\usepackage{tikz}
\usetikzlibrary{positioning}
\def\url{\tbsurl}
% silence font warnings:
% LaTeX Font Warning: Font shape `OT1/cmr/m/n' in size <45> not available
% (Font)              size <24.88> substituted on input line 94.
\makeatletter\def\@font@warning#1{}\makeatother

%%% Start of metadata %%%
\title{Markdown themes in practice}

% repeat info for each author; comment out items that don't apply.
\author{Vít Starý Novotný}
\address{Studená 453/15 \\ Brno 63800, Czech Republic}
\netaddress{witiko (at) mail dot muni dot cz}
\personalURL{github.com/witiko}

%%% End of metadata %%%

\begin{document}
\maketitle

\begin{abstract}
The Markdown package for \TeX{} supports themes that allow
\TeX nicians to tailor the presentation of Markdown and \acro{YAML} content
on the page. In this article, I will show the current state of Markdown
themes using the example of \LaTeX{} templates that I developed for the
International Software Testing Qualifications Board (\acro{ISTQB}).
Readers will leave with actionable steps to create or modify Markdown
themes for \LaTeX, and insights into extending these principles to other
\TeX{} engines.
\end{abstract}

\section*{Introduction}
Although \TeX{} has beautiful output, its input macro language is an acquired taste for many authors. The Markdown package for \TeX~\cite{novotny2017markdown} allows authors to type familiar Markdown and \acro{YAML} directly into a \TeX{} document and receive a similarly beautiful output.

In my previous article, I introduced Markdown themes~\cite{novotny2021markdown}. Much like \acro{CSS} stylesheets, Markdown themes allow \TeX nicians to tailor the presentation of Markdown and \acro{YAML} content without complicating the document markup for authors. While that article used simple examples to explain the basic concepts behind Markdown themes, it did not demonstrate their application on a larger scale in real-world software projects.

In July 2023, I began working with the International Software Testing Qualifications Board (\acro{ISTQB}) to help them typeset their certification study materials from Markdown and \acro{YAML} sources. In this article, I discuss my work as a case study of using the Markdown package in a real-world software project.

\begin{figure*}
\centering
\includegraphics[width=\linewidth]{images/class-diagram}
\caption{A class diagram of the six Markdown themes that I developed for the International Software Testing Qualifications Board (\acro{ISTQB}). The snippets \texttt{metadata}, \texttt{language}, \texttt{questions}, \texttt{answer-key}, and \texttt{answers} specify the public interface of the themes and arrows specify inheritance.}
\label{fig:class-diagram}
\vspace{1.5cm}
\input images/question-definitions
\caption{Three different ways to typeset question definitions in \acro{ISTQB} Sample Exam Questions and Answers documents: a) a list of questions, b) an answer key, and c) a list of answers.}
\label{fig:question-definitions}
\end{figure*}

\section*{Project overview}
In my work, I developed a \LaTeX{} document class and six Markdown themes~\cite{istqb2024productbase}.

The \LaTeX{} document class is named \texttt{istqb} and it is stored in file \texttt{template\slash istqb.cls}. It implements the design of all \acro{ISTQB} documents, defines the meaning of common Unicode characters, and defines \LaTeX{} markup such as \cs{istqbunnumbered\-section}, \texttt{\textbackslash istqb\-land\-scape\-begin}, and \texttt{\textbackslash istqb\-land\-scape\-end}.

The Markdown themes are named \texttt{istqb\slash*} and stored in files \texttt{template\slash markdowntheme*.sty}, see also Figure~\ref{fig:class-diagram}. Here is a description of the themes:
\begin{itemize}
\item The theme \texttt{istqb\slash common} enables Markdown syntax extensions, implements the loading of \acro{YAML} language definitions and document metadata into \TeX{} macros, and defines the mapping between Markdown elements and \LaTeX{} markup. The remaining themes are based on this theme and they implement support for specific types of \acro{ISTQB} documents.
\item The \texttt{istqb\slash body-of-knowledge} and  \texttt{syllabus} themes are used in \acro{ISTQB} Body of Knowledge and Syllabus documents. At the time of writing, the themes implement no extra functionality.
\item The theme \texttt{istqb\slash sample-exam} implements the loading of \acro{YAML} question definitions into \TeX{} macros in \acro{ISTQB} Sample Exam Questions and Answers documents. The following two themes are based on this theme.
\item The theme \texttt{istqb\slash sample-exam\slash questions} implements the typesetting of questions in \acro{ISTQB} Sample Exam Questions documents.
\item The theme \texttt{istqb\slash sample-exam\slash answers} implements typesetting of answer keys and answers in \acro{ISTQB} Sample Exam Answers documents.
\end{itemize}
\vfill

\noindent
\begin{tikzpicture}[every node/.style={inner sep=0pt, outer sep=0pt}]
  \node (wolf) at (0, 0) {\includegraphics[width=\linewidth]{images/detective-wolf.jpg}};
  \node [above=-4.5mm of wolf, text width=\linewidth, align=justify] {In the rest of this article, I show the main concepts behind Markdown themes on \acro{ISTQB} Sample Exam Questions and Answers documents using the themes \texttt{istqb\slash sample-exam}, \texttt{istqb\slash sample-exam\slash questions}, and \texttt{\slash answers}.};
  \node [below=3mm of wolf, text width=\linewidth, align=center] {With Markdown themes, your document can look like anything, even like a wolf in a disguise.};
\end{tikzpicture}%
\vspace{-0.65mm}

\section{Question definitions}
As an example of question definitions, I use the following \acro{YAML} file named \texttt{questions.yml}:

\inputminted{yaml}{examples/questions.yml}

\noindent
The file specifies three questions. For each question, it provides up to five possible answers.

\section{User interface}
In this section, I show how we can use themes \texttt{istqb\slash sample-exam\slash questions}, and \texttt{\slash answers} to typeset the question definitions from the previous section.

\subsection{Typesetting questions}
As an example of an \acro{ISTQB} Sample Exam Questions document, I use the following \LaTeX{} file:

\inputminted{latex}{examples/questions.tex}

\noindent
The file imports the snippet \texttt{questions} from theme \texttt{istqb\slash sample-exam\slash questions} and uses it to:
\begin{enumerate}
\item Process question definitions in \texttt{questions.yml}.
\item Typeset the list of questions shown in Figure~\ref{fig:question-definitions}a.
\end{enumerate}

\subsection{Typesetting answer key and answers}
As an example of an \acro{ISTQB} Sample Exam Answers document, I use the following \LaTeX{} file:

\inputminted{latex}{examples/answer-key-and-answers-short.tex}

\noindent
The file imports the snippet \texttt{answers} from theme \texttt{istqb\slash sample-exam\slash answers} and uses it to:
\begin{enumerate}
\item Process question definitions in \texttt{questions.yml}.
\item Typeset the answer key shown in Figure~\ref{fig:question-definitions}b.
\item Typeset the list of answers shown in Figure~\ref{fig:question-definitions}c.
\end{enumerate}

\section{Implementation}
In this section, I show how the themes \texttt{istqb\slash sample\-exam\slash questions}, and \texttt{\slash answers} are implemented.

\subsection{Processing question definitions}
Both the snippet \texttt{questions} from the theme \texttt{istqb\slash sample-exam\slash questions} and the snippet \texttt{answers} from the theme \texttt{\slash answers} process question definitions before typesetting them. To do this, they use the snippet \texttt{questions} from their parent theme \texttt{istqb\slash sample-exam}, which is defined as follows:

\showimplementation{examples/sample-exam.sty}

% TODO: Discuss the implementation.

\subsection{Typesetting questions}
% TODO

\subsection{Typesetting answer key}
% TODO

\subsection{Typesetting answers}
% TODO

\section*{Conclusion}
% TODO

\SetBibJustification{\raggedright \advance\itemsep by 2pt plus1pt minus1pt }
\bibliographystyle{tugboat}
\begingroup
\gappto{\UrlBreaks}{\UrlOrds}
\bibliography{tb140starynovotny-markdown}
\endgroup

\makesignature
\end{document}